
@model IEnumerable<CaptainMao.Models.Merchandise>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_MaoLayout.cshtml";
}
@section style{
    <link href="~/Areas/buy/css/shoppingIndex.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.dataTables.min.css">
}
<!--aside側欄 article主欄-->

<aside class="col-lg-1 col-lg-offset-1 col-sm-1">
    <!-------------------asideOpen------------------->
    @Html.Action("Aside","Shopping")
    <!-------------------asideEnd------------------->
</aside>
<article class="col-lg-9 col-sm-11">
    
    <div class="col-lg-12">
        <input />
        <button id="seachMer" Class="glyphicon glyphicon glyphicon-search btn btn-primary"></button>
        @Html.ActionLink(" ", "Index", "Shopping", new { @Class = "glyphicon glyphicon-th btn btn-primary" })
        @Html.ActionLink(" ", "Index_I", "Shopping", new { @Class = "glyphicon glyphicon-th-list btn btn-primary" })
    </div>
        <!-------------------articleOpen------------------->
        <div class="col-lg-12">
            @foreach (var _model in Model)
        {
                string url = "";
                try
                {
                    if (_model.Merchandise_Photo.Length > 0)
                    {
                        url = Url.Action("PixbyID", "zPublicFunction", new { id = _model.Merchandise_ID });
                    }
                }
                catch
                {
                    url = _model.Merchandise_Photo_Address;
                }
            <div class="drawingpin col-sm-4">
                <div class="row">
                    <div class="col-xs-4">@Html.DisplayNameFor(c => c.First().Merchandise_Photo)</div><div class="col-xs-6"><img src='@url' class="img-thumbnail" widdiv="300" height="300" /></div>
                </div>
                <div class="row">
                    <div class="col-xs-4">@Html.DisplayNameFor(c => c.First().Merchandise_ID)</div><div class="col-xs-6">@Html.DisplayFor(c => _model.Merchandise_ID)</div>
                </div>
                <div class="row">
                    <div class="col-xs-4">@Html.DisplayNameFor(c => c.First().Merchandise_Name)</div><div class="col-xs-6">@Html.ActionLink(_model.Merchandise_Name, "About", "Shopping", new { Merchandise_ID = _model.Merchandise_ID }, null)</div>
                </div>
                <div class="row">
                    <div class="col-xs-4">@Html.DisplayNameFor(c => c.First().Merchandise_Price)</div><div class="col-xs-6">@Html.DisplayFor(c => _model.Merchandise_Price)</div>
                </div>
                <div class="row">
                    <div class="col-xs-4">@Html.DisplayNameFor(c => c.First().Merchandise_Creatdate)</div><div class="col-xs-6">@Html.DisplayFor(c => _model.Merchandise_Creatdate)</div>
                </div>
                <div class="pull-right">@Ajax.ActionLink("加入", null, "api/PublicAPI", new { Merchandise_ID = _model.Merchandise_ID, area = "" }, new AjaxOptions { HttpMethod = "POST", OnSuccess = "Success" }, new { @class = "btn btn-primary glyphicon glyphicon-shopping-cart" })</div>
            </div>
                    }
        </div>

        <!-------------------articleEnd------------------->
</article>

@section script{
    <!--aside-->
    <script src='@Url.Content("~/Areas/buy/js/ShoppingAside.js")' ></script>
    <script src='@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")'></script>
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.1.1/js/dataTables.responsive.min.js"></script>
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.15/js/dataTables.jqueryui.min.js"></script>

    <script>
        if ('@TempData["ok"]' != '') {
            alert('@TempData["ok"]');
        }
        $(function () {
            $("#seachMer").click(function () {
                var seachMer = $(this).parent().children().first().val();
                location.href = '@Url.Action("HotMer", "Shopping",new { seach = "seachMer"})'.replace("seachMer", seachMer);
            })
        })

    </script>

<script type="text/javascript" class="init">
              $(document).ready(function () {
                  $('#example').DataTable({
                      responsive: true
                  });
              });
</script>
}